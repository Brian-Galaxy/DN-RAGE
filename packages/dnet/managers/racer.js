
let user = require('../user');

let weather = require('./weather');
let vSync = require('./vSync');

let methods = require('../modules/methods');

let vehicles = require('../property/vehicles');

let racer = exports;

let racerList = [
    {
        title: 'Реквием по Лос-Сантосу',
        desc: 'Гонка по федеральной трассе Лос-Сантос',
        repeat: 0,
        allowVehicle: ['Hotring', 'Adder', 'Autarch', 'Bullet', 'Cheetah', 'Cyclone', 'Entity2', 'Entityxf', 'emerus', 'fmj', 'furia', 'gp1', 'infernus', 'italigtb2', 'krieger', 'le7b', 'nero', 'nero2', 'osiris', 'pfister811', 'prototipo', 'reaper', 's80', 'sc1', 'sheava', 't20', 'taipan', 'tempesta', 'tezeract', 'thrax', 'turismor', 'tyrant', 'tyrus', 'vacca', 'vagner', 'visione', 'xa21', 'zentorno', 'zorrusso', 'formula', 'formula2'],
        offsetZ: -5,
        prize1: 30000,
        prize2: 20000,
        prize3: 10000,
        prize4to10: 5000,
        prizeAll: 1000,
        posList: [
            [428.9595, -555.0114, 28.42487, -35.98751],
            [540.1783, -407.5029, 31.80021, -36.87286],
            [635.0789, -271.3053, 41.05519, -33.97925],
            [732.9558, -100.8209, 54.16326, -25.52831],
            [829.3878, 63.3385, 66.9548, -35.1558],
            [1013.018, 291.7137, 82.70224, -43.11262],
            [1163.577, 445.9126, 82.40584, -45.97228],
            [1377.04, 654.9802, 79.81494, -42.72734],
            [1546.843, 904.5974, 77.31627, -26.23452],
            [1642.926, 1161.402, 83.80475, -16.66838],
            [1688.177, 1354.785, 87.06107, -9.684228],
            [1738.861, 1637.209, 83.42276, -9.69308],
            [1822.213, 2039.997, 74.80121, -9.663138],
            [1866.738, 2293.671, 57.83495, -17.99786],
            [1980.259, 2527.655, 54.28442, -37.46732],
            [2154.641, 2692.915, 48.52851, -51.50856],
            [2375.031, 2864.107, 40.10518, -52.25132],
            [2683.252, 3161.946, 51.83036, -35.80634],
            [2843.331, 3489.555, 54.46806, -21.04599],
            [2934.507, 3791.151, 52.3652, -9.015619],
            [2903.364, 4118.244, 50.21028, 16.72242],
            [2804.361, 4427.979, 48.388, 15.74756],
            [2716.12, 4778.828, 44.20984, 11.05232],
            [2624.733, 5178.079, 44.46481, 17.06137],
            [2515.832, 5530.812, 44.43468, 20.01747],
            [2344.658, 5875.391, 47.12398, 36.73484],
            [2163.637, 6062.593, 51.63507, 65.01624],
            [1958.891, 6301.592, 44.15111, 37.70294],
            [1727.561, 6376.438, 34.21215, 76.97948],
            [1371.813, 6486.22, 19.70601, 80.83662],
            [954.0787, 6492.457, 20.73886, 88.13742],
            [633.4982, 6533.053, 27.93234, 76.91004],
            [267.3691, 6569.192, 30.31893, 97.71076],
            [64.66892, 6441.674, 30.99559, 134.9081],
            [-156.0523, 6221.875, 30.88245, 135.1447],
            [-384.7614, 5989.89, 31.18895, 137.2265],
            [-547.8583, 5737.573, 36.26601, 157.1066],
            [-712.8189, 5530.154, 36.79861, 120.606],
            [-979.4655, 5398.648, 39.90875, 119.1312],
            [-1171.015, 5265.965, 53.00818, 106.1539],
            [-1272.789, 5263.409, 50.75529, 110.868],
            [-1330.406, 5142.809, 61.42479, 133.024],
            [-1477.137, 5029.415, 62.10246, 137.2739],
            [-1629.602, 4875.432, 60.68016, 129.7555],
            [-1811.968, 4706.51, 56.69532, 133.9597],
            [-2072.569, 4465.193, 58.21157, 105.634],
            [-2211.955, 4327.175, 49.01777, 152.6103],
            [-2354.389, 4030.56, 28.95742, 158.0896],
            [-2473.828, 3697.53, 14.25714, 172.9228],
            [-2579.136, 3291.201, 13.08297, 174.1454],
            [-2622.747, 2873.871, 16.37313, 171.087],
            [-2659.156, 2629.404, 16.36418, 171.0699],
            [-2710.683, 2315.92, 17.39241, 159.4641],
            [-2935.401, 2128.294, 40.47202, 137.0086],
            [-3027.093, 1894.195, 28.75432, 163.5493],
            [-2992.047, 1594.545, 29.37974, -161.6352],
            [-3082.106, 1343.496, 19.92019, 163.1802],
            [-3131.601, 1026.172, 18.8229, 150.3884],
            [-3147.641, 880.3116, 14.6025, -162.9581],
            [-3009.474, 649.7527, 21.35982, -167.021],
            [-2990.159, 430.9747, 14.70613, 173.6357],
            [-3029.593, 198.3866, 15.75785, -172.6235],
            [-2823.999, 47.8454, 14.35752, -111.5531],
            [-2596.724, -144.5677, 20.8985, -131.6894],
            [-2389.509, -262.5338, 14.62695, -123.2537],
            [-2176.899, -348.0284, 12.86608, -100.3938],
        ],
        posStartList: [
            [357.8052, -690.2796, 28.93085, -20.9381],
            [352.6691, -688.3941, 29.02683, -20.27358],
            [347.7495, -686.692, 29.03542, -20.87109],
            [342.3479, -684.7128, 29.03948, -20.86459],
            [337.1477, -682.7113, 28.95472, -21.31873],
            [353.7405, -701.4415, 28.9391, -18.32244],
            [348.6996, -699.4641, 29.02628, -19.42242],
            [343.7232, -697.5007, 29.0345, -20.30963],
            [338.3033, -695.3328, 29.03974, -20.35769],
            [333.007, -693.355, 28.95216, -20.51111],
            [329.9231, -702.9771, 28.97348, -18.88886],
            [335.1217, -705.194, 29.03398, -21.47937],
            [340.108, -707.1147, 29.03345, -20.83769],
            [345.3869, -709.0494, 29.02575, -20.83291],
            [350.3829, -710.9387, 28.93287, -21.86552],
            [346.9636, -720.2665, 28.92677, -21.42008],
            [341.684, -718.487, 29.02666, -21.42408],
            [336.5494, -716.554, 29.03198, -20.89292],
            [331.2225, -714.6782, 29.0404, -20.34419],
            [326.3562, -713.1322, 28.96957, -20.51316],
        ],
    },
    {
        title: 'Обратный реквием по Лос-Сантосу',
        desc: 'Гонка по федеральной трассе Лос-Сантос',
        repeat: 0,
        allowVehicle: ['Hotring', 'Adder', 'Autarch', 'Bullet', 'Cheetah', 'Cyclone', 'Entity2', 'Entityxf', 'emerus', 'fmj', 'furia', 'gp1', 'infernus', 'italigtb2', 'krieger', 'le7b', 'nero', 'nero2', 'osiris', 'pfister811', 'prototipo', 'reaper', 's80', 'sc1', 'sheava', 't20', 'taipan', 'tempesta', 'tezeract', 'thrax', 'turismor', 'tyrant', 'tyrus', 'vacca', 'vagner', 'visione', 'xa21', 'zentorno', 'zorrusso', 'formula', 'formula2'],
        offsetZ: -5,
        prize1: 30000,
        prize2: 20000,
        prize3: 10000,
        prize4to10: 5000,
        prizeAll: 1000,
        posList: [
            [-2547.598, -177.2294, 19.75368, 60.01688],
            [-2727.139, -0.7137796, 15.22496, 59.2584],
            [-2970.779, 106.8968, 13.70413, 41.87339],
            [-3028.115, 251.4647, 15.61445, -16.55011],
            [-2991.772, 409.564, 14.61704, -4.115777],
            [-3006.313, 638.1002, 20.90513, 15.62723],
            [-3125.481, 830.7769, 16.41774, 29.96072],
            [-3135.971, 1015.715, 18.18278, -26.91508],
            [-3103.53, 1221.791, 19.96959, -4.28782],
            [-3027.486, 1433.37, 25.01816, -40.52973],
            [-2984.25, 1571.563, 28.82062, 16.89636],
            [-3042.204, 1796.293, 34.18641, -0.5378141],
            [-2997.08, 1971.166, 30.02724, -16.92863],
            [-2938.546, 2126.52, 40.58404, -47.28886],
            [-2754.572, 2241.565, 22.2971, -46.48608],
            [-2673.811, 2527.919, 16.36464, -9.973762],
            [-2626.613, 2847.73, 16.3713, -7.231075],
            [-2594.138, 3122.464, 14.64837, -6.116103],
            [-2566.262, 3370.07, 13.04753, -11.85939],
            [-2478.916, 3643.568, 13.54618, -3.442954],
            [-2385.08, 3943.991, 24.42031, -22.15669],
            [-2333.946, 4093.311, 33.6151, -20.13825],
            [-2206.863, 4336.917, 49.83492, -24.68684],
            [-2016.022, 4501.63, 56.72081, -43.95476],
            [-1897.551, 4620.867, 56.69902, -44.19049],
            [-1601.482, 4895.076, 60.89186, -44.1636],
            [-1443.679, 5054.533, 61.20681, -58.15432],
            [-1325.397, 5148.71, 61.25172, -20.11081],
            [-1270.17, 5264.429, 50.59272, -95.96584],
            [-1157.071, 5273.505, 53.16833, -49.24834],
            [-1054.054, 5336.688, 44.48542, -48.01488],
            [-858.8607, 5440.515, 34.26301, -55.93922],
            [-704.4503, 5536.191, 37.14499, -53.57178],
            [-548.498, 5736.241, 36.2995, -22.33293],
            [-401.2768, 5971.004, 31.41979, -44.27598],
            [-200.8347, 6174.585, 30.88483, -43.9184],
            [42.33775, 6420.43, 30.98869, -44.79185],
            [283.7042, 6569.905, 29.82172, -87.18436],
            [607.748, 6535.442, 27.87055, -102.2658],
            [980.4161, 6488.224, 20.68129, -92.29586],
            [1342.26, 6487.429, 19.62078, -99.29651],
            [1766.226, 6341.887, 36.2038, -95.99692],
            [1931.677, 6262.786, 42.90754, -154.609],
            [2045.202, 6085.832, 48.09079, -130.3626],
            [2254.345, 5912.195, 49.16282, -138.8771],
            [2381.793, 5753.918, 45.50972, -149.5654],
            [2504.487, 5483.682, 44.32318, -162.4973],
            [2572.829, 5239.811, 44.40224, -166.313],
            [2636.875, 5001.769, 44.49931, -166.3621],
            [2704.371, 4716.771, 44.0662, -166.264],
            [2759.634, 4461.493, 47.53151, -162.3231],
            [2849.029, 4197.894, 49.80306, -161.3124],
            [2899.579, 3751.082, 52.36948, 167.5767],
            [2786.518, 3417.838, 55.5298, 157.8174],
            [2561.87, 3059.483, 44.20701, 131.7303],
            [2297.41, 2837.552, 41.30325, 125.4735],
            [2060.721, 2648.458, 52.08979, 131.3363],
            [1844.909, 2393.548, 54.50554, 157.0087],
            [1778.241, 2140.204, 63.77295, 171.2677],
            [1734.597, 1745.423, 78.67984, 171.2971],
            [1681.795, 1399.215, 86.21695, 168.1363],
            [1563.273, 976.6859, 78.28091, 155.4791],
            [1390.062, 691.3344, 78.85521, 138.4611],
            [1190.986, 495.3052, 81.4292, 134.1969],
            [985.931, 286.1897, 82.45197, 138.6659],
            [815.0947, 76.54124, 67.81071, 147.4437],
            [671.8452, -179.1836, 46.62429, 149.5493],
            [478.1155, -460.8253, 28.66707, 142.8414],
            [359.6075, -658.5149, 29.02946, 159.7897],
        ],
        posStartList: [
            [-2207.811, -334.0576, 12.93998, 85.15292],
            [-2208.175, -339.5239, 13.01724, 84.69572],
            [-2208.627, -344.839, 13.00358, 84.70097],
            [-2208.949, -350.1626, 12.98935, 84.68705],
            [-2209.432, -355.4539, 12.89444, 84.686],
            [-2199.842, -356.1865, 12.84231, 84.70701],
            [-2199.703, -350.8561, 12.9381, 84.6033],
            [-2199.062, -345.3566, 12.95127, 84.604],
            [-2198.79, -340.2936, 12.96497, 84.61057],
            [-2198.257, -334.8251, 12.90448, 84.16993],
            [-2189.05, -335.5652, 12.90173, 78.89016],
            [-2189.927, -341.1992, 12.90946, 85.61172],
            [-2189.86, -346.192, 12.90377, 83.78578],
            [-2190.046, -351.767, 12.88834, 83.74493],
            [-2190.467, -356.9268, 12.79377, 86.30445],
            [-2180.144, -358.0868, 12.72084, 78.80672],
            [-2179.746, -353.0219, 12.85684, 83.90617],
            [-2179.556, -347.4111, 12.86976, 81.03708],
            [-2178.918, -342.2032, 12.88228, 81.04463],
            [-2178.361, -336.6013, 12.89169, 80.46579],
        ],
    },
    {
        title: 'Винтажный Лос-Сантос',
        desc: 'Гонка по Лос-Сантосу',
        repeat: 0,
        allowVehicle: ['comet3', 'comet5', 'drafter', 'elegy', 'elegy2', 'feltzer2', 'komoda', 'imorgon', 'italigto', 'jugular', 'jester3', 'jester', 'kuruma', 'locust', 'lynx', 'massacro', 'neo', 'neon', 'ninef', 'paragon', 'pariah', 'revolter', 'schlagen', 'schwarzer', 'seven70', 'specter2', 'sugoi', 'sultan2', 'surano', 'vstr'],
        offsetZ: -5,
        prize1: 30000,
        prize2: 20000,
        prize3: 10000,
        prize4to10: 5000,
        prizeAll: 1000,
        posList: [
            [-38.5383, -2622.493, 5.691962, -84.631],
            [121.7236, -2605.148, 5.695847, -68.66492],
            [205.1242, -2550.137, 5.583061, -80.62418],
            [338.5199, -2507.126, 5.43686, -83.79301],
            [554.1121, -2502.931, 16.05291, -89.19282],
            [726.0892, -2475.013, 19.90221, -65.61192],
            [789.2048, -2448.552, 20.74289, -97.56728],
            [930.2977, -2462.208, 28.27787, -96.6482],
            [1027.19, -2466.549, 28.22243, -7.84651],
            [1045.192, -2312.727, 30.21705, -5.094861],
            [1063.289, -2082.787, 32.77523, 91.69715],
            [937.4108, -2082.418, 30.22634, 85.71027],
            [791.9546, -2067.817, 29.04604, -6.315825],
            [837.6171, -1749.099, 29.17113, -5.072323],
            [850.6926, -1589.572, 31.22982, 16.38875],
            [797.2791, -1436.829, 26.89717, 92.33354],
            [533.884, -1430.13, 29.03769, 86.18138],
            [430.0298, -1400.936, 29.0328, 52.18277],
            [342.3985, -1329.001, 32.0279, 53.31802],
            [226.6557, -1301.679, 29.01916, -6.327377],
            [219.9473, -1135.548, 28.96029, 0.1200702],
            [221.1466, -1047.962, 29.0514, 67.70429],
            [109.5281, -999.5974, 29.08685, 68.62261],
            [-31.36944, -948.6072, 29.09812, 68.36043],
            [-186.8456, -892.7073, 29.03369, 68.40469],
            [-288.0719, -858.5316, 31.45449, 79.75698],
            [-495.7908, -835.9562, 30.17802, 91.05685],
            [-629.5216, -838.4803, 24.7653, 174.9374],
            [-636.5236, -955.5229, 21.23523, 174.4208],
            [-765.7178, -1112.377, 10.39722, 119.5095],
            [-947.3895, -1213.381, 4.949234, 121.6789],
            [-1152.804, -1333.502, 4.792485, 29.24971],
            [-1196.092, -1246.618, 6.731371, 14.05874],
            [-1217.661, -1155.117, 7.439219, 15.15686],
            [-1266.425, -1006.566, 9.268629, 14.38562],
            [-1283.232, -921.8259, 11.08287, -61.21894],
            [-1175.578, -845.6985, 14.00586, -49.34438],
            [-1075.77, -760.7527, 19.04564, 37.76951],
            [-1219.517, -591.5329, 26.98845, 37.42126],
            [-1293.404, -502.5992, 32.85357, -47.54456],
            [-1109.794, -404.1616, 36.32038, -63.46637],
            [-1007.755, -351.1219, 37.58054, -65.61227],
            [-881.1519, -283.8064, 40.17943, -109.8844],
            [-810.0841, -319.449, 36.90139, -109.4395],
            [-655.7073, -361.2972, 34.57877, -53.67956],
            [-560.1709, -300.7897, 34.85195, -55.04994],
            [-453.1897, -250.8177, 35.74389, -59.21148],
            [-293.7323, -181.655, 39.06931, -8.037392],
            [-254.9398, -48.61543, 49.231, 69.53477],
            [-390.5011, 3.308762, 46.63127, 81.2259],
            [-551.104, 3.288984, 44.00218, 97.78018],
            [-708.1059, -24.21998, 37.57409, 118.0901],
            [-885.4923, -115.5892, 37.65239, 118.1501],
            [-1038.216, -194.3709, 37.57231, 114.4083],
            [-1209.262, -290.7814, 37.54776, 116.0563],
            [-1385.134, -394.1478, 36.3838, -144.9393],
            [-1305.506, -506.5295, 32.83518, -141.8942],
            [-1233.529, -594.5156, 26.92274, 129.002],
            [-1316.443, -657.7512, 26.24658, 128.2944],
            [-1438.923, -751.7559, 23.21257, 140.1208],
            [-1631.365, -987.2463, 12.70868, 139.3674],
        ],
        posStartList: [
            [-290.5332, -2643.929, 5.741457, -45.79684],
            [-293.9535, -2640.126, 5.741457, -45.79684],
            [-301.0589, -2647.162, 5.741457, -44.89931],
            [-297.448, -2650.847, 5.732291, -43.46971],
            [-307.9867, -2654.203, 5.741457, -44.89931],
            [-304.2471, -2658.117, 5.741457, -44.89533],
            [-311.0751, -2665.115, 5.741457, -44.89931],
            [-315.0651, -2660.966, 5.729914, -45.043],
            [-321.8134, -2667.808, 5.741457, -43.98733],
            [-317.5404, -2671.952, 5.741457, -43.98733],
            [-324.6284, -2679.431, 5.741457, -43.98733],
            [-329.0341, -2675.328, 5.741457, -43.98733],
            [-335.8061, -2682.212, 5.741457, -43.98733],
            [-331.202, -2686.101, 5.741457, -43.98733],
            [-337.4907, -2693.006, 5.741457, -38.98838],
            [-342.722, -2690.008, 5.741457, -34.98556],
            [-347.9268, -2698.255, 5.741457, -28.75528],
            [-342.968, -2701.428, 5.741458, -32.75914],
            [-347.4172, -2709.679, 5.741457, -23.76225],
            [-352.5784, -2707.819, 5.741457, -20.76312],
        ],
    },
    {
        title: 'Портовый договор',
        desc: 'Гонка по Лос-Сантосу',
        repeat: 0,
        allowVehicle: ['comet3', 'comet5', 'drafter', 'elegy', 'elegy2', 'feltzer2', 'komoda', 'imorgon', 'italigto', 'jugular', 'jester3', 'jester', 'kuruma', 'locust', 'lynx', 'massacro', 'neo', 'neon', 'ninef', 'paragon', 'pariah', 'revolter', 'schlagen', 'schwarzer', 'seven70', 'specter2', 'sugoi', 'sultan2', 'surano', 'vstr'],
        offsetZ: -5,
        prize1: 30000,
        prize2: 20000,
        prize3: 10000,
        prize4to10: 5000,
        prizeAll: 1000,
        posList: [
            [-1540.853, -670.5864, 28.59939, -129.3868],
            [-1440.898, -753.637, 23.21533, -129.4357],
            [-1381.386, -807.4896, 19.16286, -130.859],
            [-1287.097, -908.2208, 11.08713, -72.18178],
            [-1173.86, -848.0262, 14.0116, -145.8393],
            [-1121.787, -928.332, 2.372864, -149.8918],
            [-1068.52, -1014.911, 1.869958, -149.3177],
            [-1015.224, -1107.389, 1.882488, -152.8911],
            [-955.1201, -1209.386, 4.960654, -70.20956],
            [-780.7984, -1119.078, 10.39229, -149.0834],
            [-697.0085, -1230.372, 10.35677, -149.7914],
            [-651.8797, -1369.672, 10.35756, 176.9058],
            [-664.3465, -1456.693, 10.15355, 123.3767],
            [-727.8207, -1565.762, 13.89565, 134.4681],
            [-840.4139, -1696.419, 18.39183, 134.0169],
            [-957.0309, -1819.046, 19.49771, 135.8453],
            [-1078.89, -1935.92, 12.8483, 145.9164],
            [-1081.069, -2030.376, 12.88105, -138.199],
            [-960.3256, -2146.836, 8.483376, -54.83347],
            [-798.0628, -1991.193, 8.862642, -43.88776],
            [-684.2035, -1949.728, 6.668489, -121.9442],
            [-591.4061, -2039.89, 6.00091, -135.9332],
            [-477.2028, -2149.439, 9.094135, -112.4069],
            [-328.8093, -2143.855, 10.05117, -80.57353],
            [-135.1106, -2089.872, 25.47894, -70.09023],
            [25.08499, -2046.196, 18.05557, -89.79466],
            [159.3346, -2042.631, 18.06495, -13.74724],
            [226.1219, -1937.907, 22.80478, -41.46095],
            [283.6091, -1856.494, 26.55867, 48.78247],
            [174.5102, -1763.031, 28.87468, 47.95322],
            [59.5669, -1664.77, 29.02253, 48.72758],
            [-14.29978, -1603.942, 28.98853, 48.89008],
            [-106.9851, -1520.948, 33.47779, -39.41718],
            [-55.82666, -1468.677, 31.77724, -79.54689],
            [53.00507, -1500.944, 29.02036, -55.29862],
            [117.0393, -1440.902, 29.03375, -39.64917],
            [146.9697, -1401.966, 28.82404, 47.34185],
            [52.84094, -1364.398, 29.0372, 89.45847],
            [-76.97541, -1357.613, 29.04238, 53.77112],
            [-100.696, -1304.226, 29.04076, 1.042552],
            [-98.75523, -1147.211, 25.51228, -15.4461],
            [-13.47792, -931.696, 29.06615, -21.59096],
            [49.98822, -750.9231, 43.94604, -21.47536],
            [114.2784, -571.6362, 43.30186, -18.7669],
            [165.8627, -412.9778, 40.82333, -18.88936],
            [225.1514, -249.4682, 53.28586, -19.86416],
            [270.2253, -126.4725, 67.81927, -18.98715],
            [329.0086, 34.86655, 88.12827, -17.75018],
            [357.1601, 136.6481, 102.7854, 65.36935],
            [270.8603, 171.1867, 104.3275, 71.22332],
            [137.55, 218.9229, 106.8387, 67.49182],
            [-25.51633, 263.9093, 107.1485, 98.90482],
            [-155.5405, 259.9936, 93.7699, 81.95058],
            [-275.7881, 267.6903, 89.59362, 98.43356],
            [-412.6327, 247.3492, 83.01613, 80.79971],
            [-530.2177, 255.8618, 82.7611, 84.05558],
            [-655.9078, 263.2679, 81.1137, 107.9337],
        ],
        posStartList: [
            [-1683.219, -571.6761, 34.20998, -127.3639],
            [-1679.551, -567.184, 34.29218, -127.3023],
            [-1676.336, -562.6522, 34.3056, -127.3041],
            [-1673.393, -557.9644, 34.34465, -127.5851],
            [-1670.326, -554.0174, 34.2725, -127.4937],
            [-1678.092, -547.9442, 35.10961, -127.5055],
            [-1681.193, -551.959, 35.19083, -127.4598],
            [-1684.618, -556.4688, 35.18665, -126.2234],
            [-1688.045, -560.9161, 35.19778, -126.0627],
            [-1691.678, -565.7817, 35.06951, -126.3304],
            [-1699.413, -559.6782, 35.85517, -128.5118],
            [-1695.968, -554.8127, 36.00878, -126.1586],
            [-1692.561, -550.1398, 36.03726, -128.172],
            [-1689.128, -545.6934, 36.0769, -129.3977],
            [-1686.419, -541.5789, 36.05772, -130.1517],
            [-1695.94, -533.8959, 37.01036, -128.3195],
            [-1698.775, -538.2485, 36.96107, -130.5438],
            [-1702.178, -542.6024, 36.94577, -128.0711],
            [-1705.623, -547.3136, 36.93944, -129.8996],
            [-1709.274, -551.7776, 36.91132, -127.6406],
        ],
    },
    {
        title: 'Внедорожный округ Блейн',
        desc: 'Покажите себя во всей красе во внедорожном соревнование округа Блейн',
        repeat: 0,
        allowVehicle: ['Bfinjection', 'Blazer', 'Brawler', 'Brutus', 'Caracara2', 'Dubsta3', 'Everon', 'Freecrawler', 'Hellion', 'Kamacho', 'Mesa3', 'Outlaw', 'Riata', 'Sandking2', 'Trophytruck', 'Trophytruck2', 'Manchez', 'Sanchez', 'Sanchez2', 'Enduro'],
        offsetZ: -5,
        prize1: 30000,
        prize2: 20000,
        prize3: 10000,
        prize4to10: 5000,
        prizeAll: 1000,
        posList: [
            [149.2724, 1388.41, 252.2326, 72.08281],
            [83.54211, 1396.865, 261.0725, 50.71334],
            [41.64533, 1436.907, 267.7058, 81.97634],
            [-7.381825, 1438.526, 275.1653, 36.96298],
            [-53.77357, 1493.083, 278.5063, 60.61199],
            [-176.1229, 1495.413, 288.5875, 136.742],
            [-194.3181, 1418.293, 290.3084, -165.8247],
            [-187.2662, 1325.037, 301.9729, 141.07],
            [-253.9487, 1274.606, 309.332, 141.5432],
            [-301.9497, 1205.043, 319.8098, 123.3055],
            [-348.9512, 1171.62, 324.9236, 104.3438],
            [-392.5294, 1183.335, 325.2948, -6.409817],
            [-378.5234, 1243.88, 326.2032, -40.10991],
            [-347.1287, 1281.841, 334.0584, -21.53439],
            [-295.7375, 1437.565, 338.3817, -18.17861],
            [-281.6541, 1524.419, 336.2225, -23.5346],
            [-235.3357, 1569.322, 331.2644, -51.61472],
            [-142.3001, 1614.566, 292.8419, -68.75854],
            [-64.14616, 1652.207, 257.8533, -57.59707],
            [75.5627, 1804.547, 191.0954, -26.56637],
            [117.5935, 1904.535, 160.7866, -18.96818],
            [166.8218, 2006.607, 133.5071, -23.71753],
            [182.5635, 2051.944, 121.2283, -26.15588],
            [273.6097, 2159.177, 87.64864, -47.43411],
            [343.2173, 2248.553, 69.52422, -30.904],
            [394.7807, 2336.237, 55.08476, -35.39518],
            [464.5706, 2416.323, 46.59878, -32.55243],
            [548.7827, 2452.599, 56.68876, -102.0843],
            [693.465, 2394.348, 56.18722, -53.60605],
            [727.257, 2429.448, 59.82128, 25.71742],
            [669.2164, 2498.948, 65.13431, 23.83739],
            [643.8305, 2600.764, 52.31819, -8.63647],
            [686.4421, 2663.546, 42.5769, -69.46768],
            [789.7471, 2696.081, 39.89011, -95.31252],
            [898.6016, 2696.008, 40.55784, -88.69202],
            [1041.388, 2689.464, 39.03396, -96.51133],
            [1136.206, 2691.178, 37.94344, -20.68198],
            [1135.142, 2759.209, 37.35933, 17.28408],
            [1114.292, 2854.934, 38.71686, -40.88297],
            [1167.849, 2963.184, 40.2016, -60.33608],
            [1252.155, 2969.305, 40.53472, -105.9403],
            [1384.437, 2967.671, 40.36159, -27.30522],
            [1439.133, 3053.743, 40.22473, -22.16075],
            [1480.234, 3152.954, 40.89403, -14.02877],
            [1523.183, 3328.132, 37.05197, -12.17463],
            [1565.744, 3426.323, 36.24561, -9.95087],
            [1599.573, 3514.958, 35.81219, -32.44913],
            [1651.473, 3582.906, 35.18542, 27.24669],
            [1584.931, 3701.087, 34.18371, 34.10841],
            [1543.374, 3750.807, 34.19976, 120.6812],
            [1429.405, 3697.367, 33.64873, 109.6805],
            [1313.726, 3654.824, 32.88052, 107.7533],
            [1145.895, 3624.751, 33.55948, 86.78631],
            [971.8518, 3633.301, 32.07761, 87.00051],
            [827.0556, 3628.141, 32.59744, 105.0455],
            [693.9553, 3583.984, 32.75742, 104.1722],
            [543.5129, 3574.583, 32.7718, 82.66112],
            [427.7841, 3594.2, 33.04388, 74.70707],
            [347.4251, 3592.462, 33.01503, 134.1757],
        ],
        posStartList: [
            [254.6076, 1268.369, 233.1825, 3.184366],
            [251.092, 1268.014, 233.2209, 3.064901],
            [247.4579, 1268.221, 233.2662, 2.429682],
            [244.4604, 1268.281, 233.2731, 2.723954],
            [244.8536, 1258.859, 232.5568, 3.339092],
            [248.222, 1258.924, 232.5516, 4.223484],
            [251.5572, 1258.891, 232.535, 1.772376],
            [255.3098, 1258.833, 232.4543, 1.731065],
            [255.8203, 1249.288, 231.7101, 1.837754],
            [252.0888, 1249.198, 231.7798, 1.98989],
            [248.7137, 1249.152, 231.7925, 4.513267],
            [245.4924, 1249.149, 231.8081, 4.844447],
            [246.4981, 1238.971, 230.9921, 5.706379],
            [249.8252, 1239.193, 230.9855, 7.058313],
            [252.9801, 1239.491, 230.9865, 5.635312],
            [256.7529, 1239.773, 230.9202, 7.362341],
            [257.7554, 1230.936, 230.1376, 8.332268],
            [254.3435, 1230.455, 230.1937, 8.694899],
            [250.8282, 1229.97, 230.1917, 8.914639],
            [247.1322, 1229.476, 230.1869, 9.188037],
        ],
    },
    {
        title: 'Рёв мотора',
        desc: 'Покажите себя во всей красе во внедорожном соревнование округа Блейн',
        repeat: 0,
        allowVehicle: ['Bfinjection', 'Blazer', 'Brawler', 'Brutus', 'Caracara2', 'Dubsta3', 'Everon', 'Freecrawler', 'Hellion', 'Kamacho', 'Mesa3', 'Outlaw', 'Riata', 'Sandking2', 'Trophytruck', 'Trophytruck2', 'Manchez', 'Sanchez', 'Sanchez2', 'Enduro'],
        offsetZ: -5,
        prize1: 30000,
        prize2: 20000,
        prize3: 10000,
        prize4to10: 5000,
        prizeAll: 1000,
        posList: [
            [-2254.667, 4285.679, 46.27541, 6.648644],
            [-2264.782, 4376.328, 41.20721, -17.08386],
            [-2246.33, 4428.155, 38.93269, -51.58301],
            [-2197.181, 4489.729, 33.98139, -29.57189],
            [-2171.779, 4517.084, 34.82159, -73.6348],
            [-2127.554, 4510.321, 28.9566, -87.99044],
            [-2070.498, 4515.164, 29.96283, -65.97034],
            [-2038.827, 4524.188, 27.93103, -102.1523],
            [-1979.82, 4495.679, 31.68237, -132.3581],
            [-1886.81, 4426.452, 45.54426, -109.5415],
            [-1748.074, 4350.611, 60.73432, -133.8019],
            [-1689.246, 4274.759, 73.79257, -163.6066],
            [-1647.876, 4208.951, 83.49226, -110.9304],
            [-1546.785, 4208.961, 72.85012, -83.04168],
            [-1453.367, 4222.33, 50.76003, -109.7503],
            [-1402.476, 4181.477, 48.1612, -136.6488],
            [-1355.007, 4128.331, 62.49937, -92.31943],
            [-1322.534, 4182.411, 62.86308, -19.65045],
            [-1283.812, 4273.013, 65.35873, -61.28143],
            [-1222.046, 4292.392, 74.74823, -91.4206],
            [-1160.061, 4285.547, 82.81144, -95.2447],
            [-1108.103, 4285.14, 91.16766, -121.0648],
            [-1043.445, 4254.229, 113.0387, -149.1778],
            [-1033.068, 4168.926, 119.479, -152.9076],
            [-982.5741, 4143.592, 126.4407, -76.20142],
            [-920.7999, 4125.443, 152.1395, -149.4178],
            [-852.3355, 4077.485, 163.9993, -131.7082],
            [-810.3892, 4051.201, 161.2521, -87.01749],
            [-743.1031, 4034.294, 144.935, -118.3559],
            [-659.1876, 4013.928, 127.9681, -101.794],
            [-591.1782, 3972.738, 114.0051, -87.68829],
            [-545.66, 3955.592, 98.0831, -79.73346],
            [-469.4072, 3971.404, 73.96377, -133.9204],
            [-426.056, 3944.601, 66.51608, -65.98068],
            [-375.0957, 3987.864, 51.73552, -48.33058],
            [-330.7228, 4013.147, 46.00148, -131.0323],
            [-242.6831, 3912.474, 38.61995, -75.24869],
            [-222.396, 4010.812, 36.75388, 24.10465],
            [-238.1649, 4101.517, 37.94823, -21.80891],
            [-205.8201, 4212.544, 44.37212, 44.22858],
            [-280.0071, 4225.016, 43.03581, 94.80792],
            [-368.8058, 4266.943, 47.01163, 65.1962],
            [-415.2061, 4288.483, 56.69746, 55.36034],
            [-501.3655, 4356.775, 66.71662, 67.01089],
            [-569.1102, 4357.869, 58.25836, 63.85331],
            [-655.9795, 4378.595, 33.4612, 76.11352],
            [-730.7786, 4411.346, 21.22045, 74.78564],
            [-784.0715, 4399.78, 17.63951, 61.90788],
            [-824.7691, 4411.966, 19.9239, 93.02628],
            [-869.0245, 4400.307, 20.4637, 54.24997],
            [-893.9176, 4425.228, 20.50924, 102.27],
            [-947.9336, 4421.702, 17.34282, 50.454],
            [-1014.174, 4419.298, 23.52132, 77.25171],
            [-1099.864, 4418.648, 12.3779, 68.54404],
            [-1156.219, 4443.233, 17.44774, 41.44744],
            [-1218.856, 4476.042, 29.65459, 81.34476],
            [-1273.348, 4500.816, 19.52522, 97.5573],
            [-1348.126, 4470.83, 22.90182, 96.59648],
            [-1408.273, 4486.047, 23.20417, 84.08425],
            [-1479.32, 4473.795, 16.83978, 94.01556],
            [-1553.923, 4486.624, 19.55655, 53.33161],
            [-1568.045, 4548.436, 16.99462, -3.10363],
            [-1543.873, 4633.095, 24.8619, -64.92696],
            [-1514.647, 4671.458, 34.87054, 17.45464],
            [-1532.214, 4699.549, 42.76247, 48.63027],
            [-1564.498, 4729.605, 49.77046, 48.0928],
            [-1597.074, 4766.029, 50.93813, 117.8759],
            [-1628.061, 4742.924, 52.5812, 140.8933],
        ],
        posStartList: [
            [-2318.195, 4112.77, 35.68112, -20.83211],
            [-2322.704, 4113.683, 35.63339, -20.36057],
            [-2327.917, 4115.514, 35.6187, -19.73049],
            [-2332.411, 4117.052, 35.61642, -18.93539],
            [-2336.957, 4118.725, 35.65756, -18.68114],
            [-2340.399, 4108.167, 34.72176, -18.31532],
            [-2335.548, 4106.851, 34.70808, -17.97785],
            [-2330.948, 4105.641, 34.73185, -17.40286],
            [-2325.992, 4104.021, 34.74836, -17.2634],
            [-2321.248, 4102.037, 34.70751, -18.09736],
            [-2324.152, 4092.649, 33.8277, -17.37154],
            [-2329.061, 4094.318, 33.84539, -17.06329],
            [-2333.94, 4095.842, 33.83079, -16.66841],
            [-2338.417, 4097.227, 33.83171, -16.32198],
            [-2343.415, 4098.915, 33.87868, -16.10595],
            [-2346.432, 4088.548, 32.97144, -14.64297],
            [-2341.248, 4087.362, 32.96169, -17.12307],
            [-2336.727, 4086.144, 32.96953, -16.65948],
            [-2331.623, 4084.765, 32.99554, -16.30109],
            [-2326.716, 4083.339, 32.99072, -16.56834],
        ],
    },
    {
        title: 'Пыль и Грязь',
        desc: 'Покажите себя во всей красе во внедорожном соревнование округа Блейн',
        repeat: 0,
        allowVehicle: ['Bfinjection', 'Blazer', 'Brawler', 'Brutus', 'Caracara2', 'Dubsta3', 'Everon', 'Freecrawler', 'Hellion', 'Kamacho', 'Mesa3', 'Outlaw', 'Riata', 'Sandking2', 'Trophytruck', 'Trophytruck2', 'Manchez', 'Sanchez', 'Sanchez2', 'Enduro'],
        offsetZ: -5,
        prize1: 30000,
        prize2: 20000,
        prize3: 10000,
        prize4to10: 5000,
        prizeAll: 1000,
        posList: [
            [-777.3625, 5432.93, 36.00516, -79.46068],
            [-709.3457, 5434.225, 44.59686, -125.0347],
            [-711.7167, 5314.449, 71.18134, 79.39391],
            [-818.8372, 5320.811, 76.60159, 95.26524],
            [-912.8622, 5297.01, 79.71712, 118.6075],
            [-926.6512, 5247.154, 83.25681, -95.34869],
            [-856.5281, 5258.162, 86.09802, -77.65994],
            [-762.8636, 5261.81, 91.44864, -104.1635],
            [-734.8066, 5209.617, 102.1052, 176.9802],
            [-675.8591, 5141.805, 121.3543, -125.4648],
            [-603.4694, 5069.7, 134.8925, -98.7539],
            [-531.186, 5034.174, 130.1891, -115.9298],
            [-468.6826, 4962.194, 152.3045, -121.7813],
            [-406.8573, 4924.256, 182.0301, -125.5126],
            [-367.7441, 4963.032, 200.3085, -0.6788672],
            [-228.993, 4904.739, 310.6435, -104.0294],
            [-65.13855, 4959.26, 394.3861, -13.97774],
            [17.20807, 5032.222, 452.6619, -11.91294],
            [65.61601, 5018.123, 459.8695, -119.7745],
            [109.3346, 5101.161, 508.5654, -46.60382],
            [119.1965, 5198.396, 534.7269, -2.06549],
            [146.0243, 5184.808, 553.517, -73.96205],
            [186.8656, 5224.766, 580.4503, -30.45133],
            [226.9063, 5284.642, 616.8364, 1.97719],
            [289.0643, 5359.038, 634.1268, -33.53159],
            [360.497, 5461.804, 689.2809, -17.33768],
            [429.7316, 5505.113, 743.6389, -73.46252],
            [495.9406, 5532.119, 778.0356, -43.57973],
            [522.6672, 5598.52, 780.7632, -10.28353],
            [551.5737, 5650.127, 769.9134, -56.335],
            [604.3235, 5675.694, 747.6616, -65.08303],
            [664.2426, 5694.088, 729.5305, -77.93645],
            [755.9366, 5699.28, 699.3578, -109.7485],
            [817.2054, 5683.012, 691.5686, -106.5667],
            [869.532, 5657.11, 677.1943, -118.7279],
            [909.4794, 5647.06, 659.8235, -107.5311],
            [968.4197, 5647.291, 630.4036, -60.91554],
            [1012.65, 5676.366, 599.9278, -41.73462],
            [1099.445, 5742.3, 552.6686, -52.87761],
            [1150.764, 5766.372, 531.4285, -70.53463],
            [1204.679, 5783.683, 517.7069, -76.85597],
            [1278.483, 5796.41, 483.9753, -67.709],
            [1328.576, 5802.993, 465.6024, -105.6146],
            [1390.824, 5793.567, 455.701, -96.06721],
            [1447.68, 5797.939, 448.4738, -84.25354],
            [1518.481, 5801.663, 420.8448, -99.64785],
            [1676.93, 5824.716, 377.6177, -82.84659],
            [1741.959, 5825.992, 358.0827, -87.58289],
            [1890.061, 5825.28, 296.9683, -74.90836],
            [2027.549, 5790.913, 230.5701, -104.3275],
            [2120.612, 5770.802, 194.3586, -106.3131],
            [2187.288, 5763.418, 172.4618, -114.123],
            [2244.201, 5739.806, 144.9169, -126.1466],
            [2298.528, 5688.493, 112.8799, -133.7329],
            [2367.82, 5637.464, 88.32172, -139.7265],
            [2414.651, 5584.351, 69.69884, -132.8247],
            [2471.823, 5518.629, 44.7856, -143.5242],
            [2506.977, 5473.354, 44.30148, -160.3624],
            [2563.477, 5275.937, 44.36111, -165.9337],
            [2607.852, 5107.813, 44.50157, -164.6728],
        ],
        posStartList: [
            [-960.8264, 5399.603, 39.11684, -69.79539],
            [-961.7314, 5402.668, 39.0892, -70.17822],
            [-963.1244, 5406.289, 39.05304, -71.21882],
            [-964.5591, 5409.609, 39.07013, -67.67937],
            [-966.3005, 5413.528, 39.08863, -67.93506],
            [-970.498, 5395.433, 39.63366, -66.20592],
            [-971.756, 5398.523, 39.61072, -66.76887],
            [-973.1627, 5401.819, 39.57474, -67.3824],
            [-974.6793, 5405.641, 39.58712, -68.51333],
            [-976.0237, 5409.011, 39.58135, -66.46113],
            [-985.246, 5404.506, 40.04804, -63.18697],
            [-983.334, 5401.234, 40.03564, -64.15514],
            [-981.7297, 5397.538, 40.02738, -62.08853],
            [-980.2997, 5394.014, 40.07915, -64.3529],
            [-978.8765, 5391.008, 40.10017, -63.21168],
            [-986.8433, 5386.483, 40.54449, -59.4929],
            [-988.4802, 5389.421, 40.52468, -60.1252],
            [-990.2377, 5392.813, 40.48068, -60.51915],
            [-992.3407, 5396.035, 40.50983, -58.2534],
            [-994.2012, 5399.535, 40.50342, -61.55624],
        ],
    }
];

let greenZone = [new mp.Vector3(-283.3326, -2029.733, 29.1531), new mp.Vector3(-276.6155, -2043.147, 29.14559), new mp.Vector3(-270.3195, -2039.875, 29.14559), new mp.Vector3(-264.9152, -2036.421, 29.14559), new mp.Vector3(-260.1243, -2032.617, 29.14638), new mp.Vector3(-249.3651, -2019.347, 29.1459), new mp.Vector3(-246.5171, -2013.835, 29.14585), new mp.Vector3(-222.435, -2015.979, 26.75543), new mp.Vector3(-216.8737, -1998.244, 26.75543), new mp.Vector3(-255.3651, -1991.249, 32.03854)];

let isCreate = false;
let isStart = false;
let currentVehicle = '';
let currentRace = 0;
let currentLobby = 0;
let finishNumber = 0;
let startTimer = 10;

racer.loadAll = function () {
    setInterval(racer.timer, 1000);
};

racer.finish = function (player) {
    if (user.isLogin(player)) {

        try {
            vehicles.respawn(player.vehicle);
            user.teleport(player, -253.9224, -1993.057, 30.14611);
            player.dimension = 0;

            finishNumber++;

            user.set(player, 'rating_racer_count', user.get(player, 'rating_racer_count') + 1);

            if (finishNumber === 1) {
                let money = racerList[currentRace].prize1;
                methods.notifyWithPictureToAll('Arena RaceClub', '~g~' + racerList[currentRace].title, `~g~${user.getRpName(player)}~s~ занял ~g~1-ое~s~ место и выиграл ~g~${methods.moneyFormat(money)}`, 'CHAR_CARSITE4');
                user.addCashMoney(player, money, finishNumber + ' место в гонке ' + racerList[currentRace].title);

                user.set(player, 'rating_racer_mmr', user.get(player, 'rating_racer_mmr') + 25);
                user.set(player, 'rating_racer_win', user.get(player, 'rating_racer_win') + 1);
            }
            else if (finishNumber === 2) {
                let money = racerList[currentRace].prize2;
                methods.notifyWithPictureToAll('Arena RaceClub', '~g~' + racerList[currentRace].title, `~g~${user.getRpName(player)}~s~ занял ~g~2-ое~s~ место и выиграл ~g~${methods.moneyFormat(money)}`, 'CHAR_CARSITE4');
                user.addCashMoney(player, money, finishNumber + ' место в гонке ' + racerList[currentRace].title);

                user.set(player, 'rating_racer_mmr', user.get(player, 'rating_racer_mmr') + 20);
                user.set(player, 'rating_racer_win', user.get(player, 'rating_racer_win') + 1);
            }
            else if (finishNumber === 3) {
                let money = racerList[currentRace].prize3;
                methods.notifyWithPictureToAll('Arena RaceClub', '~g~' + racerList[currentRace].title, `~g~${user.getRpName(player)}~s~ занял ~g~3-ое~s~ место и выиграл ~g~${methods.moneyFormat(money)}`, 'CHAR_CARSITE4');
                user.addCashMoney(player, money, finishNumber + ' место в гонке ' + racerList[currentRace].title);

                user.set(player, 'rating_racer_mmr', user.get(player, 'rating_racer_mmr') + 15);
                user.set(player, 'rating_racer_win', user.get(player, 'rating_racer_win') + 1);
            }
            else if (finishNumber > 3 && finishNumber <= 10) {

                user.set(player, 'rating_racer_mmr', user.get(player, 'rating_racer_mmr') + 5);

                let money = racerList[currentRace].prize4to10;
                player.notifyWithPicture('Arena RaceClub', '~g~' + racerList[currentRace].title, `~g~${user.getRpName(player)}~s~ занял ~g~${finishNumber}-ое~s~ место и выиграл ~g~${methods.moneyFormat(money)}`, 'CHAR_CARSITE4');
                user.addCashMoney(player, money, finishNumber + ' место в гонке ' + racerList[currentRace].title);
            }
            else {
                if (finishNumber === 18)
                    user.set(player, 'rating_racer_mmr', user.get(player, 'rating_racer_mmr') - 15);
                else if (finishNumber === 19)
                    user.set(player, 'rating_racer_mmr', user.get(player, 'rating_racer_mmr') - 20);
                else if (finishNumber === 20)
                    user.set(player, 'rating_racer_mmr', user.get(player, 'rating_racer_mmr') - 25);
                else
                    user.set(player, 'rating_racer_mmr', user.get(player, 'rating_racer_mmr') - 5);

                if (user.get(player, 'rating_racer_mmr') < 0)
                    user.set(player, 'rating_racer_mmr', 0);

                let money = racerList[currentRace].prizeAll / 2;
                player.notifyWithPicture('Arena RaceClub', '~g~' + racerList[currentRace].title, `~g~${user.getRpName(player)}~s~ занял ~g~${finishNumber}-ое~s~ место и выиграл ~g~${methods.moneyFormat(money)}`, 'CHAR_CARSITE4');
                user.addCashMoney(player, money, finishNumber + ' место в гонке ' + racerList[currentRace].title);
            }

            user.save(player);
        }
        catch (e) {
            methods.debug(e);
        }
    }
};

racer.exit = function (player) {
    if (user.isLogin(player)) {
        vehicles.respawn(player.vehicle);
        user.teleport(player, -253.9224, -1993.057, 30.14611);
        player.dimension = 0;
    }
};

racer.createRace = function (id = -1) {
    if (id === -1)
        id = methods.getRandomInt(0, racerList.length);

    currentRace = id;
    currentVehicle = racerList[currentRace].allowVehicle[methods.getRandomInt(0, racerList[currentRace].allowVehicle.length)];
    isCreate = true;
    isStart = false;
    finishNumber = 0;

    mp.vehicles.forEach(v => {
        if (vehicles.exists(v) && v.dimension === 9999)
            vehicles.respawn(v);
    });

    racer.notifyRace();
};

racer.notifyRace = function () {
    methods.notifyWithPictureToAll('Arena RaceClub', '~b~' + racerList[currentRace].title, `В 12:00 состоится гонка на автомобилях ~g~${currentVehicle}~s~ с призовым фондом более ~g~${methods.moneyFormat(racerList[currentRace].prize1 + racerList[currentRace].prize2 + racerList[currentRace].prize3)}\n~s~Свободных мест: ~b~${20 - currentLobby}`, 'CHAR_CARSITE4');
};

racer.startRace = function () {

    if (currentLobby < 5) {
        isCreate = false;
        methods.notifyWithPictureToAll('Arena RaceClub', '~r~' + racerList[currentRace].title, 'Гонка была отменена из-за нехватки участников', 'CHAR_CARSITE4');

        mp.players.forEach(p => {
            if (user.isLogin(p)) {
                if (methods.isInPoint(p.position, greenZone)) {
                    if (user.has(p, 'isRaceLobby')) {
                        user.addCashMoney(p, 1000, 'Возврат средств');
                        p.notify('~g~Вам вернули деньги за внос');
                        user.reset(p, 'isRaceLobby');
                    }
                }
            }
        });
        return;
    }

    isCreate = false;
    isStart = true;
    startTimer = 10;

    methods.notifyWithPictureToAll('Arena RaceClub', '~g~' + racerList[currentRace].title, `Гонка началась\n${racerList[currentRace].desc}`, 'CHAR_CARSITE4');

    let currentSpawn = 0;
    mp.players.forEach(p => {
        if (user.isLogin(p)) {
            if (methods.isInPoint(p.position, greenZone)) {
                if (user.has(p, 'isRaceLobby')) {
                    p.dimension = 9999;

                    let spawnArray = racerList[currentRace].posStartList[currentSpawn];
                    let spawnPos = new mp.Vector3(spawnArray[0], spawnArray[1], spawnArray[2]);
                    let spawnRot = spawnArray[3];

                    currentSpawn++;

                    user.teleport(p, spawnArray[0], spawnArray[1], spawnArray[2]);

                    p.outputChatBoxNew(`Кнопка !{2196F3}F!{FFFFFF} чтобы зареспавнить автомобиль`);
                    p.outputChatBoxNew(`Кнопка !{2196F3}ESC!{FFFFFF} выйти из гонки`);

                    setTimeout(function () {
                        vehicles.spawnCarCb(veh => {

                            if (!vehicles.exists(veh))
                                return;

                            try {
                                veh.dimension = 9999;
                                veh.setColor(methods.getRandomInt(0, 160), methods.getRandomInt(0, 160));
                                veh.setVariable('isRace', true);

                                vSync.setFreezeState(veh, true);
                                p.call('client:raceUpdate', [JSON.stringify(racerList[currentRace])]);
                            }
                            catch (e) {
                                methods.debug(e);
                            }

                            if (user.isLogin(p))
                                user.putInVehicle(p, veh, -1);

                        }, spawnPos, spawnRot, currentVehicle);
                    }, 1000);
                }
            }
        }
    });
};

racer.timer = function () {

    if (isStart && startTimer >= 0) {
        mp.players.forEach(p => {
            if (user.isLogin(p)) {
                if (user.has(p, 'isRaceLobby')) {

                    if (startTimer > 0) {
                        vSync.setFreezeState(p.vehicle, true);
                    }

                    if (startTimer === 0) {
                        p.notifyWithPicture('Arena RaceClub', '~g~' + racerList[currentRace].title, `~g~СТАРТ!!!\nСТАРТ!!!\nСТАРТ!!!`, 'CHAR_CARSITE4');
                        vSync.setFreezeState(p.vehicle, false);
                    }
                    else if (startTimer > 0 && startTimer <= 3) {
                        p.notifyWithPicture('Arena RaceClub', '~g~' + racerList[currentRace].title, `До старта ~g~${startTimer}сек`, 'CHAR_CARSITE4');
                    }
                }
            }
        });
        startTimer--;
    }

    if (isCreate === false)
        return;

    currentLobby = 0;
    mp.players.forEach(p => {
        if (user.isLogin(p)) {
            if (user.has(p, 'isRaceLobby') && methods.isInPoint(p.position, greenZone)) {
                currentLobby++;
                p.notifyWithPicture('Arena RaceClub', '~g~' + racerList[currentRace].title, `~b~В лобби:~s~ ${currentLobby}\nОжидайте начала гонки в 12:00\nНе покидайте помещение, иначе вы покините лобби`, 'CHAR_CARSITE4');
            }
            if(user.has(p, 'isRaceLobby') && !methods.isInPoint(p.position, greenZone)) {
                user.reset(p, 'isRaceLobby');
                p.notifyWithPicture('Arena RaceClub', '~g~' + racerList[currentRace].title, `~r~Вы покинули лобби`, 'CHAR_CARSITE4');
            }
        }
    });
};

racer.enterLobby = function (p) {
    if (user.isLogin(p)) {
        if (methods.isInPoint(p.position, greenZone)) {

            if (currentLobby >= 20) {
                if (!user.has(p, 'isRaceLobby')) {
                    p.notifyWithPicture('Arena RaceClub', '~g~' + racerList[currentRace].title, `~r~В связи с большим наплывом участников, заявка на участие была отклонена. Извините за неудобства. В следующий раз приезжайте заранее.`, 'CHAR_CARSITE4');
                }
            }
            else {

                if (user.has(p, 'isRaceLobby')) {
                    p.notifyWithPicture('Arena RaceClub', '~g~' + racerList[currentRace].title, `~r~Вы уже являетесь участником гонки.`, 'CHAR_CARSITE4');
                    return;
                }

                if (user.getCashMoney(p) < 1000) {
                    p.notifyWithPicture('Arena RaceClub', '~g~' + racerList[currentRace].title, `~r~Недостаточно средств для взноса, необходимо $1000`, 'CHAR_CARSITE4');
                    return;
                }
                user.removeCashMoney(p, 1000, 'Взнос в участии гонки');
                p.notifyWithPicture('Arena RaceClub', '~g~' + racerList[currentRace].title, `~b~Ожидайте начала мероприятия`, 'CHAR_CARSITE4');
                user.set(p, 'isRaceLobby', true);
            }
        }
    }
};